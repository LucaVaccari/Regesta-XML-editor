<mvc:View controllerName="sap.ui.demo.walkthrough.controller.Editor" xmlns:m="sap.m" xmlns:f="sap.f" xmlns:l="sap.ui.layout" xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc" xmlns:cd="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" displayBlock="true">
	<m:App>
		<m:Page id="page" showFooter="true" showHeader="true" class="body">
			<m:customHeader>
				<m:OverflowToolbar>
					<m:ToolbarSpacer />
					<m:Title visible="{=!${/editingTitle}}" text="{/title}" id="titleLabel" />
					<m:Input visible="{/editingTitle}" value="{/title}" id="titleInput" submit="onTitleChange" change="onTitleChange" width="50%" />
					<m:Button icon="sap-icon://edit" press="onTitleEdit" tooltip="Change the name of this file" />
					<m:ToolbarSpacer />
				</m:OverflowToolbar>
			</m:customHeader>
			<m:content>
				<m:HBox width="auto" height="90%" alignContent="Center" justifyContent="Center">
					<m:VBox height="auto" width="45%">
						<m:OverflowToolbar>
							<m:ToolbarSpacer />
							<m:Button enabled="{/somethingChanged}" icon="sap-icon://undo" iconFirst="true" width="auto" press="onUndo" id="undoButton" tooltip="Undo the last action" />
							<m:Button enabled="{/fileChanged}" icon="sap-icon://reset" iconFirst="true" width="auto" iconDensityAware="false" press="onReset" id="resetButton" tooltip="Reset evertything to the initial state (undoable)" />
							<m:Button enabled="{/somethingUndone}" icon="sap-icon://redo" iconFirst="false" width="auto" iconDensityAware="false" press="onRedo" id="redoButton" tooltip="Redo the last undone action" />
							<m:ToolbarSpacer />
							<m:Button enabled="{/somethingSelected}" icon="sap-icon://add" iconFirst="true" width="auto" iconDensityAware="false" press="onAdd" tooltip="Add child" id="addButton" />
							<m:Button enabled="{=${/somethingSelected} &amp;&amp; !${/isRootSelected}}" icon="sap-icon://delete" iconFirst="true" width="auto" iconDensityAware="false" press="onRemove" tooltip="Remove this element (and all of his children)" id="removeButton" />
							<m:Button enabled="{=${/somethingSelected} &amp;&amp; !${/isRootSelected}}" icon="sap-icon://duplicate" iconFirst="true" width="auto" iconDensityAware="false" press="onDuplicate" tooltip="Duplicate this element (and all of his children)" id="duplicateButton" />
							<m:ToolbarSpacer />
							<m:Button enabled="{/somethingSelected}" text="Key-value" icon="sap-icon://edit" visible="true" press="onEdit" tooltip="Edit the key and the value of the selected item" id="editButton" />
							<m:Button enabled="{/somethingSelected}" text="Attributes" icon="sap-icon://edit" visible="true" press="onEditAttributes" tooltip="Edit the attributes of the selected item" id="editAttributesButton" />
							<m:ToolbarSpacer />
						</m:OverflowToolbar>
						<m:ScrollContainer horizontal="true" vertical="true" width="100%" height="100%">
							<m:Tree showNoData="false" items="{path:'/data' , templateShareable: false}" id="tree" toggleOpenState="update" includeItemInSelection="true" mode="SingleSelectMaster" select="onSelect" itemPress="onSelect">
								<m:items>
									<m:CustomTreeItem type="Active">
										<m:customData>
											<core:CustomData 
											key="id" 
											value="{id}"/>
										</m:customData>
										<m:OverflowToolbar cd:id="{id}" width="100%">
											<!-- Key input -->
											<m:Label visible="{=!${editing}}" text="{key}" width="40%" />
											<m:Input visible="{editing}" value="{key}" change="onSubmit" submit="onSubmit" liveChange="onKeyValueEditLive" width="40%" />
											<!-- Value input -->
											<m:Label visible="{=!${editing} &amp;&amp; !${isParent}}" text="{value}" class="padding-side" width="40%" />
											<m:Input visible="{=${editing} &amp;&amp; !${isParent}}" value="{value}" change="onSubmit" submit="onSubmit" liveChange="onKeyValueEditLive" width="40%" />
											<!-- Move buttons -->
											<m:ToolbarSpacer />
										</m:OverflowToolbar>
										<m:HBox>
											<m:Button enabled="{=!${isLast}}" visible="{=${id} !== 0}" icon="sap-icon://slim-arrow-down" press="onMoveDown" tooltip="Move this element down" width="5%" />
											<m:Button enabled="{=!${isFirst}}" visible="{=${id} !== 0}" icon="sap-icon://slim-arrow-up" press="onMoveUp" tooltip="Move this element up" width="5%" />
										</m:HBox>
									</m:CustomTreeItem>
								</m:items>
							</m:Tree>
						</m:ScrollContainer>
					</m:VBox>
					<m:VBox height="auto" width="50%" class="sapUiResponsiveMargin">
						<m:OverflowToolbar>
							<m:SegmentedButton>
								<m:items>
									<m:SegmentedButtonItem text="XML" press="onXMLSwitch" />
									<m:SegmentedButtonItem text="Compact XML" press="onCompactXMLSwitch" />
									<m:SegmentedButtonItem text="JSON" press="onJSONSwitch" />
								</m:items>
							</m:SegmentedButton>
							<m:Button text="Download preview" icon="sap-icon://download" press="onDownloadPreview" tooltip="Download the file as you see it in the preview below" />
							<m:ToolbarSpacer />
							<m:Label text="Show attributes:" />
							<m:Switch state="true" change="onToggleAttributesVisibility" customTextOn=" " customTextOff=" " tooltip="Toggle attributes visibility in the preview">
								<m:layoutData>
									<m:FlexItemData growFactor="1" />
								</m:layoutData>
							</m:Switch>
						</m:OverflowToolbar>
						<m:ScrollContainer horizontal="true" vertical="true" width="100%" height="100%">
							<m:FormattedText htmlText="{/preview/content}" class="test" height="100%" />
						</m:ScrollContainer>
						<m:Slider value="{/preview/fontSize}" width="100%" id="fontSizeSlider" min="10" max="40" liveChange="updatePreview" />
					</m:VBox>
				</m:HBox>
			</m:content>
			<m:footer>
				<m:OverflowToolbar>
					<m:ToolbarSpacer />
					<m:Button type="Reject" text="Cancel" press="onCancel" class="test" tooltip="Exit and discard all changes" />
					<m:Button type="Accept" text="Export" press="onExport" tooltip="Save the changes and export the file" />
				</m:OverflowToolbar>
			</m:footer>
		</m:Page>
	</m:App>
</mvc:View>